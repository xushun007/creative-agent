# 消息压缩配置文件

compaction:
  # 默认策略
  default_strategy: "opencode"
  
  # 触发条件
  trigger:
    # 自动触发阈值（占用上下文的百分比）
    auto_threshold: 0.75
    # 检查间隔（每 N 条消息检查一次）
    check_interval: 5
  
  # 策略配置
  strategies:
    opencode:
      enabled: true
      config:
        # Prune 配置
        prune_minimum: 20000      # 最小修剪阈值（tokens）
        prune_protect: 40000      # 保护最近的 tokens
        protect_turns: 2          # 保护最近的对话轮数
        
        # 自动压缩阈值
        auto_threshold: 0.75      # 75%使用率时触发
        
        # 摘要配置
        summary_model: "gpt-4"
        summary_max_tokens: 2000
        
        # 是否启用各功能
        enable_prune: true
        enable_compact: true
  
  # 监控和日志
  monitoring:
    enable_metrics: true
    log_level: "INFO"
    metrics_export_interval: 60  # 秒

